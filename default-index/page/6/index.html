<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"skk1faker.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.19.2","exturl":false,"sidebar":{"position":"left","width":240,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="登峰造极">
<meta property="og:type" content="website">
<meta property="og:title" content="skk1faker 笔记">
<meta property="og:url" content="https://skk1faker.github.io/default-index/page/6/index.html">
<meta property="og:site_name" content="skk1faker 笔记">
<meta property="og:description" content="登峰造极">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="skk1faker">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://skk1faker.github.io/default-index/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"default-index/page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>skk1faker 笔记</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">skk1faker 笔记</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-navigation"><a href="/navigation" rel="section"><i class="fa fa-user fa-fw"></i>导航</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="skk1faker"
      src="/images/acm-icpc.png">
  <p class="site-author-name" itemprop="name">skk1faker</p>
  <div class="site-description" itemprop="description">登峰造极</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/skk1faker" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;skk1faker" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:skk1faker@163.com" title="E-Mail → mailto:skk1faker@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com" rel="noopener me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/03/01/%E9%B8%BD%E5%B7%A2%E5%8E%9F%E7%90%86%E7%AD%94%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/03/01/%E9%B8%BD%E5%B7%A2%E5%8E%9F%E7%90%86%E7%AD%94%E6%A1%88/" class="post-title-link" itemprop="url">鸽巢原理答案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-03-01 15:56:31" itemprop="dateCreated datePublished" datetime="2024-03-01T15:56:31+08:00">2024-03-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我看的是那本老外写的黑黑的书<a
target="_blank" rel="noopener" href="https://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.102.51932feelCtElu&amp;id=520373091579&amp;standard=1&amp;user_id=2455124912&amp;cat_id=2&amp;is_b=1&amp;rn=b8c59f9268deb18e6da60301e8eac103">《组合数学第五版》</a>。老外写书的时候答案好像没有怎么写，我作为<strong>帅B</strong>就帮大家写写吧（<strong>郑重声明</strong>：我不是卖书的就是给大家看看长啥样^_-）</p>
###
<center>
题目
<center>
<p>(题号与书上的题号对应，答案在后面）
 2.证明从1-200中取100个数且选取的这些数中有一个小于16，那么存在两个选取的整数，使得他们中的一个能被另一个整除。</p>
<p> 4.如果集合{1,2,,......2n}中选择n+1个整数总存在两个整数他们之间(<strong>没有“最多”二字</strong>)相差1。</p>
<p> 5.如果从集合{1,2,,......3n}中选择n+1个数那么么总存在两个数它们之间<strong>最多</strong>差2。</p>
<p> 7.对任意给定的52个数，要么二者的和能被100整除，要么二者的差能被100整除</p>
 8.利用鸽巢原理证明，有理数<span
class="math inline">\(\frac{m}{n}\)</span>展开的十进制小数是循环的。例如
<center>
<p><span
class="math inline">\(\frac{34478}{99900}=0.345,125,125,125,125,12.....\)</span></p>
<p> 9.一个房间有10个人，他们当中没有人超过60岁（年龄只能以整数给出）但又至少1岁.
  证明：
    （1）总能够找出两组人（两组人中不含相同的人），各组人的年龄和是相同的
    （2）题目中10不能换成更小的数</p>
<p> 10一个孩子每天看10个小时的电视，总共看7周，但是因为其父母的控制，任何一周看电视时间从不超过11个小时。
 证明：存在连续若干天，在此期间这个孩子恰好看了20个小时电视（假设看电视时间为整数）
 11.一个学生有37天准备考试。根据以往的经验，他知道他需要的学习时间不超过60小时，他还希望每天至少学习一小时。证明：无论她如何安排他的学习时间（每天的时间是一个整数），都存在连续的若干天，在此期间她学习了13个小时
 13.设S是平面上6各点的集合，其中没有三点共线。给出S的甸所确定的15条线段着色，将他们或者着成红色，或者着成蓝色证明：至少存在<strong>两个</strong>
三角形他们是红色的，或者是蓝色的，或者是红色和蓝色的（抱歉我发现我证错了，先空一下）
 14.一个袋子里面装了100个苹果、100个香蕉、100个橘子、100个梨。如果每分钟我们从中拿出一个水果，那木哦多久后对于一种水果我们拿出了12个
 15.对于任意 n+1整数<span
class="math inline">\(a_{1},a_{2}.....a_{n+1}\)</span>存在两个正整数<span
class="math inline">\(a_{i}\)</span>和<span
class="math inline">\(a_{j}\)</span>使得<span
class="math inline">\(a_{i}-a{j}\)</span>被100整除。
 16.证明：在一群n&gt;1个人中，存在两个人他们在这群人中有相同的熟人（假设自己不是自己的熟人）
 17.有一个100人的聚会，每个人都有偶数（可以是0）个熟人。证明：在这次聚会上有3个人，其熟人数量相等。
 18.证明：在边长等于2的正方形中任选5个点，它们当中存在2个点镇两个点的距离最多是<span
class="math inline">\(\sqrt{2}\)</span>
 19.(a)证明：在边长为1的等边三角形中任意选择5个点存在两个点，期间距至多为<span
class="math inline">\(\frac{1}{2}\)</span>
  (b)证明：在边长为1的等边三角形中任意选择10个点存在两个点，期间距至多为<span
class="math inline">\(\frac{1}{3}\)</span>   (c
)证明：在边长为1的等边三角形中任意选择m个点存在两个点，期间距至多为<span
class="math inline">\(\frac{1}{n}\)</span>
 26.设军乐团的mn个人一下述方式站成一m行n列的方队；在每一行中的每一个人都比他或她左边的人高。假设指挥官将每一列的人按身高从前至后增加的顺序排列。证明：各行仍是按照身高从左到右增加的顺序排列。
 28.在一次舞会上有10位男士和20位女士。对于1，2，...，100中的每个i，第i位男士选择<span
class="math inline">\(a_{i}\)</span>位女士作为他的潜在舞伴(这<span
class="math inline">\(a_{i}\)</span>女士组成他的“舞伴清单”)，这样，对任意给定的一组20位男士与20位女士配成舞伴对，且每位男士索赔的舞伴都在他的舞伴清单中。保证和一点的最小和<span
class="math inline">\(\sum_{i=1}^{100}a_{i}\)</span>是多少.</p>
###
<center>
证明如下
 4.两个数相差1，如果用鸽巢原理的话，他么可以说是两个数有什么相同的性质，在同一个鸽笼里，我们写成表达式就是
<center>
<span class="math inline">\(a-b=1\)</span>
<center>
<p><span class="math inline">\(b=a-1\)</span></p>
<p>于是我们可以利用这个“<span
class="math inline">\(=\)</span>”号来进行构建每一个鸽巢的性质，
设取出来的数为<span
class="math inline">\(a_{1},a_{2}......a_{n+1}\)</span>我们构造元素<span
class="math inline">\(b_{i}=a_{i}-1\)</span>这样就得到了2n+2个数，这些数的范围<span
class="math inline">\(b_{i}\)</span>最小为0，<span
class="math inline">\(a_{i}\)</span>最大为2n，所以集合<span
class="math inline">\(A=[0,1,2....2n]\)</span>中共有2n+1个数，我么构造了2n+2个数归入集合A中必有两个数在一个元素中，于是必有<span
class="math inline">\(a_{i}=b_{j}+1\)</span>存在。</p>
 5.这个题应该注意对题目的理解，他的目的是证明一定存在最多差二的情况，而不是所有数的差最大为2，那么证明过程和上面类似，我们翻译一下最多相差2，就是存在相差1<strong>或</strong>相差2的，进行下列构造
<center>
<span class="math inline">\(b_{i}=a_{i}-1\)</span>
<center>
<p><span class="math inline">\(c_{i}=a_{i}-2\)</span></p>
<p>可以知道<span
class="math inline">\(a_{i},b_{i},c_{i}\)</span>的取值范围为<span
class="math inline">\([-1,3n]\)</span>共3n+2个数，而我们构造的数有3n+3个，所以必有两个相等。</p>
 7.两个数能被100整除说明这两个数又到同一个“鸽笼”里面去了，对于除法，我们不妨对所有数取<span
class="math inline">\(mod100\)</span>，这样的话所有数都可以分为100类，两个数相加可以被<span
class="math inline">\(100\)</span>整除我们可以知道他们的模应该是这样的
<center>
<span class="math inline">\(x=amod(100)\)</span>
<center>
<p><span class="math inline">\(y=bmod(100)\)</span></p>
两个数相加表示为
<center>
<p><span class="math inline">\(x+y==100||x+y==0\)</span></p>
两个数相减 表示为
<center>
<p><span class="math inline">\(x==y\)</span></p>
<p>现在将可以完成上述配对的元素组成一个数对，于是我么可以构造一个集合A={<span
class="math inline">\((a_{i1},a_{i2})\)</span>|,a_{i1}+a_{i2}==100}+{(0,0)}
直观的写就是{(0,0),(1,99),(2,98).....(50,50)}，里面的每个数都是所有数mod（100）后的结果，对于每个实数对中例如（2，98），如果两个元素共同出自这里，要么他们相同即都是2或98，这时二者相减所得可被100整除，要么是2和98，这时二者相加也可被00整除，这样的数对共有51个，取出52个数后，必有两个在一个元素中，命题得证。</p>
 8.首先有循环一定是除法过程中部分的被除数（我也不知道叫啥）有了循环除法就是像现在写的那样，我们假设除数为n，被除数为m，<span
class="math inline">\(b_{i}\)</span>为中间被除数，<span
class="math inline">\(a_{i}\)</span>为我们常说的商，那么
<center>
<p><span class="math inline">\(\left\{\begin{matrix}
m=a_{1}n+b_{1}，b_{1}=m mod(n)\\
b_{1}=a_{2}n+b_{2}，b_{2}=b_{1}mod(n)\\
b_{2}=a_{3}n+b_{3}，b_{3}=b_{2}mod(n)\\
.\\
.\\
.\\
b_{n}=a_{n}n+b_{n+1}, b_{n+1}=b_{n}mod(n)\\
.\\
.\\
.\\
\end{matrix}\right.\)</span></p>
<p>因为是无限循环所以必然能使得<span
class="math inline">\(b_{n}\)</span>出现，由于由于<span
class="math inline">\(b_{i}\)</span>为对n取m的结果，所以<span
class="math inline">\(b_{i}\in[0,n-1]\)</span>，而<span
class="math inline">\(b_{i}\)</span>多余n个，所以<span
class="math inline">\(b_{i}\)</span>最终会循环，这也导致了<span
class="math inline">\(a_{i}\)</span>循环，于是商就循环了</p>
<p> 9.上来的时候我们理解错题意了，所以我先为各位纠正一下题意，他的意思就是选两个相交后是空集<strong>但是他们的并集并不一定是全集</strong><del>(我就在这里理解错了)</del>
的集合  (1)<span
class="math inline">\(10\)</span>个数哦我们可以选择的非空集合有<span
class="math inline">\(2^{10}-1=1023\)</span>个但是每一个集合的年龄和的范围为<span
class="math inline">\([10,600]\)</span>共590个元素,所以必有两个集合的值相同，这两个集合中的元素可能相同，不符合题意，但完全没有关系，我们可以将两个集合中的元素去重，去重后两个集合人年龄和仍然相同，也许你会问去重后两个集合中有没有一个为空集，答案是不会的，因为如果得到空集的话，非空集的年龄和就为零，但是年龄最小值为1，所以不会有空集。
 (2)如果<span class="math inline">\(n&lt;10\)</span>那么集合个数是<span
class="math inline">\(2^n-1\leq{n*(60-1)}\)</span>,所以我们无法使用鸽巢原理证明有两种集合的元素值相等。（不等式我没有证明，但是在n==9的时候是成立的，<del>应该可以用数学归纳法吧！</del>）</p>
 10.7周共49天，一周不能超过11小时，则7周不能超过77小时，如果将看电视时间视为一个序列<span
class="math inline">\(a_{i}\)</span>,那么题中指出的就是要寻找连续和为20的情况，设：
<center>
<p><span class="math inline">\(s_{i}=\sum_{k=1}^{i}a_{k}\)</span></p>
那么从第i天到第j天的和为<span
class="math inline">\(s_{j}-s_{i-1}\)</span>，换句话说我们要找到两个数<span
class="math inline">\(s_{i}\)</span>和<span
class="math inline">\(s_{j}\)</span>使得
<center>
<p><span class="math inline">\(s_{i}=s_{j}+20\)</span></p>
<p>于是我们构造元素<span
class="math inline">\(s_{i}+20\)</span>,那么元素<span
class="math inline">\(s_{i},s_{i}+20\)</span>组成的集合取值范围为<span
class="math inline">\([49,77+20]\)</span>,共有48个值，而我们有<span
class="math inline">\(2\times49=98\)</span>个元素所以必有两个i，j使得<span
class="math inline">\(s_{i}=s_{j}+20\)</span>。</p>
<p> 11.我就不写了......你可以看看第10题（* ---- *）</p>
<p> 13.（待更新）</p>
<p> 14.这个也太简单了吧，你可能心里都知道答案，也许不知道怎么用鸽巢原理，我来提示一下，<span
class="math inline">\(X_{苹果}+X_{香蕉}+X_{橘子}+X_{梨}=(4\times(ans-1))+1\)</span>，其中ans是我们要拿的元素个数，<span
class="math inline">\(X_{水果}\)</span>是个数，所以答案是45;</p>
 15.这个问题也是十分的简单，依旧是先将等式化简一下
<center>
<span class="math inline">\(a_{i}-a{j}\equiv0mod(n)\)</span>
<center>
<p><span class="math inline">\(a_{i}\equiv a_{j}mod (n)\)</span></p>
<p>接下来的鸽巢原理就好做了我们设<span
class="math inline">\(b_{i}=a_{i}mod(n)\)</span>于是<span
class="math inline">\(b_{i}\in[0,n-1]\)</span>一共有n+1个<span
class="math inline">\(b_{i}\)</span>但是取值有n个，所以必有<span
class="math inline">\(b_{i}\equiv b_{i}mod(n)\)</span>，命题得证
 16.在以上几个题中这个应该是一个新问题了，设每个人的序列s为<span
class="math inline">\(a_{1},a_{2}……a_{n}\)</span>每个元素的取值范围为[0,n-1],根据<a
target="_blank" rel="noopener" href="https://www.cnblogs.com/zywscq/p/4819978.html">Havel-Hakimi</a><a
href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a>我们可以知道这个这个序列不可能为0,1,2……n-1,所以不能同时有n个不同值出现在序列里，根据鸽巢原理必有两值相等。<strong>最后补充一点，使用Havel-Hakimi是因为我们涉及到要把题中的条件转化到我们的证明中，由于遇到的是图论，我们所设的序列受到无向图的限制，所以要加上的一些判断，在后面的题中我们依然能遇到</strong></p>
<p> 17.又是道图论的题(我无法解释为什么偶数的时候没用Havel-Hakimi),由于都是偶数,所以只有(98,96,.....0)共50个数,设度数(认识人个数)序列为<span
class="math inline">\(a_{1},a_{2}......a_{n}\)</span>我们分几种情况讨论
  情况1:某个偶数在序列中只出现一次,那么序列中剩余的99个数被赋上49个值必然会出现3个数同值
  情况二:没有数在序列中只出现一次或者多余两次,这句话只能有一种情况符合,就是序列(0,0,2,2,4,4,......98,98)所有偶数值都出现了两次,但这种情况不会出现,因为有两个数值为0,意味着有两个人谁都不认识,所以一个人最多认识<span
class="math inline">\(99-2=97\)</span>个人,但序列中存在98个人,于是这种情况不成立,
情况二的反面就是"<strong>存在数在序列中出现一次或大于等于三次</strong>",根据情况一我们知道有数字在序列出现一次必有其他数出现大于等于三次,命题得证</p>
<p> 18.在正方形中最远的距离就是对角线距离,我们可以反推存在两个点相距<span
class="math inline">\(\sqrt{2}\)</span>那么说明这两个点可能在同一个<span
class="math inline">\(1\times1\)</span>正方形中,现在看题并翻译,题目中要求在<span
class="math inline">\(2\times2\)</span>的正方形中放置5个点使得他们有两个点在同一个<span
class="math inline">\(1\times1\)</span>正方形中,于是我们将正方形分成4个<span
class="math inline">\(1\times1\)</span>正方形,根据鸽巢原理,必有两个点在一个正方形内部,证明结束</p>
<p> 19这题有三个小问,我就分着给大家答.
(a)这和18题是一样的,三角形中最远的两点距离就是边的距离(怎么找的,你可以想象作圆,由于等边三角形在三个点出的情况是对称的,所以选择一点作圆,例如顶点(我也不知道我为啥想的是顶点,如果你有证法不妨发给我看^
_
^)就能发现到达两边的距离最大),然后根据这些将三角形分割(<strong>注意不是因为题目给出三角形我们就分成三角形,我们可以分成圆形,分成正方形,但是分成别的形状就不能进行密铺,导致有些形状我们要进行特殊关注,造成麻烦</strong>)
(b)同上 (c
)就是道推导题,我们只要知道了过程知道关键在哪就能反推回去,我就不写了吧!</p>
<p>我没有学完Ramsey定理,所以这部分题先不做了吧!</p>
 26.<strong>这道题我没有办法用鸽巢原理,如果有人知道请告诉我</strong>,考虑两列的情况，两列这个问题等价于另一问题——==“第一列按顺序给出，第二列第i行元素都大于第一列的i行元素，证明第二里元素序排列后满足，同行内两元素前一个小于后一个”==
我们把这个问题叫做<strong>问题A</strong>，问题简单的了起来，如果新得出的问题得证，那在mn的情况下我们使用归纳法：
  (1)初始：对第一列排序，第二列得排序结果依然维持着在两列中每行第一个元素小于第二个元素;
  (2)归纳：对第i列排序，第i+1列得排序结果依然维持着在两列中每行第一个元素小于第二个元素;（原因是问题A已经被证出来了）
 那么下面就证明一下问题A，我的证明方法是利用递归，先将<span
class="math inline">\(a_{i}\)</span>有序给出，然后将对应的<strong>无序</strong><span
class="math inline">\(b_{i}\)</span>给出来，我们把<strong>情况B(n)</strong>
记作”在规模为n时至少有n-i+1个<span
class="math inline">\(b_{i}\)</span>数大于等于<span
class="math inline">\(a_{i}\)</span>“，原因是不等式（数轴可能会直观些)
<center>
<p><span class="math inline">\(\left\{\begin{matrix}  a_{i}\leq
b_{i}\\a_{i}\leq a_{i+1}\leq b_{i+1}\\.\\.\\.\\a_{i}\leq a_{n}\leq
b_{n}\end{matrix}\right.\)</span></p>
<p>下面我们使用递归   从最后一个元素<span
class="math inline">\(a_{n}\)</span>开始，我们从大于<span
class="math inline">\(a_{n}\)</span>的<span
class="math inline">\(b_{i}\)</span>中能够找出最大的一个记作<span
class="math inline">\(c_{n}\)</span>，根据不等式关系<span
class="math inline">\(c_{n}\)</span>一定是<span
class="math inline">\(b_{i}\)</span>中最大的一个，且满足<span
class="math inline">\(c_{n}\geq
a_{n}\)</span>从b序列中剔除选出的数字，现在的结论是大于<span
class="math inline">\(a_{i}\)</span>的<span
class="math inline">\(b_{j}\)</span>个数比原来的小1（因为最大的没了），那么，大于<span
class="math inline">\(a_{i}\)</span>的<span
class="math inline">\(b_{j}\)</span>个数至少为n-i也就相应成立，将<span
class="math inline">\(a_{n}\)</span>除掉我们发现这个问题由”情况B(n)“变为了情况”B(n-1)“，最终完成情况B(1)，这个时候得到的<span
class="math inline">\(c\)</span>是b的有序序列，且满足<span
class="math inline">\(a_{i}\leq c_{i}\)</span></p>
  当然问题A还有一种证法，群友张晴川大佬(大佬轻松的就证出来了)提供了这样的思路,先进行证明<span
class="math inline">\(2\times2\)</span>的情况,
<center>
<p><span class="math inline">\(\begin{bmatrix}
a_{1}&amp;b_{1}\\
a_{2}&amp;b_{2}\\
\end{bmatrix}\)</span></p>
第一列依然是有序的，在这两列数中满足<span
class="math inline">\(a_{i}&lt;b_{i}\)</span>，经过分类讨论（<span
class="math inline">\(b_{i}\)</span>正序还是倒序）很容易证明当对<span
class="math inline">\(b_{i}\)</span>排序后依然满足某行内顺序，那么对于
<center>
<p><span class="math inline">\(\begin{bmatrix}
a_{1}&amp;b_{2}\\a_{2}&amp;b_{2}\\.&amp;.\\.&amp;.\\a_{n}&amp;b_{n}\\
\end{bmatrix}\)</span></p>
<p>在这两列中找出存在<span
class="math inline">\(b_{i}\)</span>最大的那行与最后一行构成一个<span
class="math inline">\(2\times2\)</span>的矩阵进行排序（如果找到的那行不是最后一行
那么得到的两行进行排序就是将<span
class="math inline">\(b_{i}\)</span>与<span
class="math inline">\(b_{n}\)</span>进行交换）依然满足行内前一元素大于后一元素，现在b中最大元素与a中最大元素在一起了，去掉最后一行那么问题的规模就变成了n-1，接下来递归求解就行了。</p>
<p>  28.假设<span
class="math inline">\(a_{i}\)</span>是男人名单上女人的个数<span
class="math inline">\(b_{i}\)</span>是女人名单上男人的个数，那么由<span
class="math inline">\(\sum_{i=1}^{20}b_{i}=\sum_{j=1}^{100}a_{j}\)</span>当存在<span
class="math inline">\(b_{i}\leq
80\)</span>时会有20名男性不在它的名单上，选出那20位男性，他们最多能有19人与女性配对不服题意，当<span
class="math inline">\(b_{i}\geq81\)</span>时<span
class="math inline">\(\sum_{j=1}^{100}a_{j}\geq1620\)</span>,在和为1620的情况下有符合题意的分配，有80个男人他们的表上有20个女人，剩余20个男人表上一人分配一个女人，且这二十个人每个人都不会重复。（这道题用鸽巢原理的话应该是这样，先证明1620的分配好使，在证明<span
class="math inline">\(\sum_{i=1}^{20}b_{i}&lt;1620\)</span>的时候有<span
class="math inline">\(b_{i}\leq80\)</span>,上面已经证明<span
class="math inline">\(b_{i}\leq80\)</span>是不符合题意的）</p>
<p> </p>
<p> </p>
<p> 会的都写上了，剩下的几道题不是没想出来，就是连题都不知道要干嘛
，有兴趣的同学可以评论中给我些提示</p>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>其递归定义为：由非负整数组成的非增序列<span
class="math inline">\(s_{度}\)</span>：<span
class="math inline">\(d_{1}，d_{2}，…，d_{n}（n\geq2，d_{1}\geq1）\)</span>是可图的，当且仅当序列：<span
class="math inline">\(s_{1}:d_{2}– 1，d_{3}– 1，…，d_{d1+1} –
1，d_{d1+2}，…，d_{n}\)</span>是可图的<a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/02/28/neovide%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/28/neovide%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">neovide安装与使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-02-28 09:03:04" itemprop="dateCreated datePublished" datetime="2024-02-28T09:03:04+08:00">2024-02-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装方法">安装方法</h1>
<p><a target="_blank" rel="noopener" href="https://neovide.dev/installation.html">安装指南</a></p>
<h2 id="使用appimage-作为执行文件">1.使用appimage 作为执行文件</h2>
<p>将neovide.appimage加上可执行权限即可，<code>chmod + x neovide.appimage</code>。但这种方法存在一定缺陷，环境变量的设置会出现一定问题。例如在命令行中输入<code>:!g++ -v</code>与在终端输出的结果不一样.</p>
<p><img src="neovim_Appimage_g++-v.png" alt="neovim_Appimage_g++-v" />
<img src="rust_neovide_g++-v.png" alt="rust_neovide_g++-v" /></p>
<p>上方图片为neovide.appimage产生的输出，下方为使用rust编译的neovide产生的输出。<br />
上面环境变量<code>COLLECT_GCC=neovide.appimage</code>，编译c++程序后会导致报错。<br />
下面输出与终端中输出一致，编译程序输出正确。</p>
<h2 id="使用rust编译源码安装">2. 使用rust编译源码安装</h2>
<p>按照安装指南的引导，使用如下命令： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install -y curl \</span><br><span class="line">    gnupg ca-certificates git \</span><br><span class="line">    gcc-multilib g++-multilib cmake libssl-dev pkg-config \</span><br><span class="line">    libfreetype6-dev libasound2-dev libexpat1-dev libxcb-composite0-dev \</span><br><span class="line">    libbz2-dev libsndio-dev freeglut3-dev libxmu-dev libxi-dev libfontconfig1-dev \</span><br><span class="line">    libxcursor-dev</span><br><span class="line"></span><br><span class="line">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf <span class="string">&quot;https://sh.rustup.rs&quot;</span> | sh</span><br><span class="line"></span><br><span class="line">cargo install --git https://github.com/neovide/neovide</span><br><span class="line"></span><br></pre></td></tr></table></figure>
无论你是否安装rust<code>curl --proto '=https' --tlsv1.2 -sSf "https://sh.rustup.rs" | sh</code>，最好执行一下，如果你安装了rust，直接按y，然后选择1默认安装的方式。或者不用上方命令，使用<code>rustup update</code>更新rust版本。</p>
<p>最后<code>cargo install --git https://github.com/neovide/neovide</code>，将项目使用rust编译，记住，一定要设置环境变量<code>CARGO_TARGET_DIR</code>例如<code>export CARGO_TARGET_DIR=$&#123;HOME&#125;/.cargo/bin</code>，如果没有这个设置，那么编译之后结果位置就没有指定，可能会编译到tmp中的某个文件夹中。</p>
<p>编译完成后，可执行文件就在<code>CARGO_TARGET_DIR</code>中</p>
<h1 id="配置文件">配置文件</h1>
<p><a target="_blank" rel="noopener" href="https://neovide.dev/configuration.html">配置参考资料</a></p>
<p>配置文件直接方法nvim中的lua脚本中。这里给出当前配置情况。
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 配置方法情参考https://neovide.dev/configuration.html</span></span><br><span class="line">vim.g.neovide_fullscreen = <span class="literal">true</span>   <span class="comment">-- 设置客户端是否全屏</span></span><br><span class="line">vim.g.neovide_transparency = <span class="number">0.7</span>  <span class="comment">-- 设置客户端透明度</span></span><br><span class="line">vim.g.neovide_hide_mouse_when_typing = <span class="literal">true</span> <span class="comment">-- 控制输入时鼠标是否存在</span></span><br><span class="line"><span class="comment">-- 特效情况控制</span></span><br><span class="line">vim.g.neovide_cursor_vfx_mode = <span class="string">&quot;sonicboom&quot;</span> <span class="comment">-- normal与输入模式切换的特效</span></span><br><span class="line"><span class="comment">--vim.g.neovide_cursor_vfx_mode = &quot;ripple&quot;</span></span><br><span class="line"><span class="comment">--vim.g.neovide_cursor_vfx_mode = &quot;railgun&quot; -- 光标移动时的特效</span></span><br><span class="line"><span class="comment">--vim.g.neovide_cursor_vfx_mode = &quot;wireframe&quot;</span></span><br><span class="line">vim.g.neovide_cursor_animate_command_line = <span class="literal">true</span>  <span class="comment">--关闭切换状态时，光标在缓冲区窗口与命令行之间的跳动,true是开启这个特效</span></span><br><span class="line">vim.g.neovide_cursor_animate_in_insert_mode = <span class="literal">true</span>  <span class="comment">-- 开启insert状态光标特效情况，false无特效</span></span><br><span class="line">vim.g.neovide_profiler = <span class="literal">false</span><span class="comment">-- 可能是显示帧率的一个东西</span></span><br><span class="line">vim.g.neovide_refresh_rate = <span class="number">144</span>   <span class="comment">-- 设置刷新率</span></span><br><span class="line">vim.g.neovide_cursor_trail_size = <span class="number">0.8</span>   <span class="comment">-- 光标拖尾长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果进入neovide时输入法为中文输入法，那么说明中文输入法在输入法管理器中优先级比较高，把英文输入法的优先级调高即可</span></span><br><span class="line"><span class="comment">--neovide 设置结束</span></span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/02/20/%E8%9B%8B%E6%8C%9E%E5%88%B6%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/20/%E8%9B%8B%E6%8C%9E%E5%88%B6%E4%BD%9C/" class="post-title-link" itemprop="url">蛋挞制作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-02-20 12:58:14" itemprop="dateCreated datePublished" datetime="2024-02-20T12:58:14+08:00">2024-02-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol type="1">
<li>中筋面粉 150g(可以使用一半低筋 + 一半高筋)</li>
<li>盐2g</li>
<li>水80g</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/02/10/matplotlib%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/02/10/matplotlib%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93/" class="post-title-link" itemprop="url">matplotlib使用中文字体</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-02-10 16:07:27" itemprop="dateCreated datePublished" datetime="2024-02-10T16:07:27+08:00">2024-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32981102">参考</a> <a
target="_blank" rel="noopener" href="https://github.com/StellarCN/scp_zh/blob/master/fonts/SimHei.ttf">SimHei下载地址</a>
<a
target="_blank" rel="noopener" href="https://blog.csdn.net/OldDriver1995/article/details/114827088">代码参考</a>
<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32981102">清除缓存参考</a></p>
<p>首先下载simHei字体，将这个字体放在<code>/home/skt1faker/anaconda3/envs/homework/lib/python3.9/site-packages/matplotlib/mpl-data/fonts/ttf</code>下，路径的位置是<code>python -c "import matplotlib; print(matplotlib.matplotlib_fname())"</code>，这个是个文件位置，上一级就快到我们要找的路径了。</p>
<p>之后代码中加入 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl  </span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.family&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> _rebuild</span><br><span class="line">_rebuild()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
注意<code>from matplotlib.font_manager import _rebuild</code>可能会报错，这个时候就要手动进行内存的清除，使用命令<code>pyhton -c "import matplotlib;print(matplotlib.get_cachedir())"</code>即可得到缓存位置<code>/home/skt1faker/.cache/matplotlib/*</code>之后运行<code>rm -rf /home/skt1faker/.cache/matplotlib/*</code>重新运行程序即可使用当前SinHei字体</p>
<h2 id="latex显示">latex显示</h2>
<p>需要进行如下配置来晚上环境 <a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58121461/runtimeerror-failed-to-process-string-with-tex-because-latex-could-not-be-found">环境配置</a>
<a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/31214214/matplotlib-error-latex-was-not-able-to-process-the-following-string-lp">环境配置B</a>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install texlive texlive-latex-extra texlive-fonts-recommended dvipng</span><br><span class="line">pip install latex</span><br></pre></td></tr></table></figure></p>
<h2 id="latex与中文共同显示">latex与中文共同显示</h2>
<p>最后使用matplotlib中使用latex直接使用如下代码，如果需要中文显示需要设置字体
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f5</span>():</span><br><span class="line">   <span class="comment"># 设置matplotlib库字体的非衬线字体为黑体</span></span><br><span class="line">   plt.rcParams[<span class="string">&quot;font.sans-serif&quot;</span>]=[<span class="string">&quot;SimSun&quot;</span>]</span><br><span class="line">   <span class="comment"># 设置matplotlib库字体族为非衬线字体</span></span><br><span class="line">   plt.rcParams[<span class="string">&quot;font.family&quot;</span>]=<span class="string">&quot;sans-serif&quot;</span></span><br><span class="line">   x = [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>]</span><br><span class="line">   y = [<span class="number">100</span>, <span class="number">300</span>, <span class="number">500</span>, <span class="number">700</span>, <span class="number">900</span>]</span><br><span class="line">   fig, ax = plt.subplots()</span><br><span class="line">   ax.plot(x, y)</span><br><span class="line">   x_labels = [<span class="string">r&#x27;第五重要特征&#x27;</span>, <span class="string">r&#x27;第四重要特征&#x27;</span>, <span class="string">r&#x27;第三重要特征&#x27;</span>, <span class="string">r&#x27;第二重要特征&#x27;</span>, <span class="string">r&#x27;第一重要特征&#x27;</span>]</span><br><span class="line">   <span class="comment"># x_labels = [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;1&#x27;]</span></span><br><span class="line">   y_labels = [<span class="string">r&#x27;$\lambda_&#123;min&#125;$&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">r&#x27;$\lambda_&#123;max&#125;$&#x27;</span>]</span><br><span class="line">   ax.set_xticks(x)</span><br><span class="line">   ax.set_yticks(y)</span><br><span class="line">   ax.set_xticklabels(x_labels)</span><br><span class="line">   ax.set_yticklabels(y_labels)</span><br><span class="line">   ax.scatter(x,y,color=<span class="string">&#x27;red&#x27;</span>,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">   <span class="comment"># plt.xticks(rotation=45)</span></span><br><span class="line">   plt.savefig(<span class="string">&#x27;hhh.pdf&#x27;</span>,dpi=<span class="number">200</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>, pad_inches=<span class="number">0.1</span>)</span><br><span class="line">   plt.close()</span><br><span class="line">   <span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line">f5() </span><br><span class="line"></span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/22/%E8%B4%A8%E6%95%B0%E7%9B%B8%E5%85%B3%E6%A6%82%E7%8E%87%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/22/%E8%B4%A8%E6%95%B0%E7%9B%B8%E5%85%B3%E6%A6%82%E7%8E%87%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">质数相关概率算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-22 17:30:03" itemprop="dateCreated datePublished" datetime="2024-01-22T17:30:03+08:00">2024-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="miller-rabin快速判断质数">Miller Rabin快速判断质数</h1>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/646602750">参考</a> <a
target="_blank" rel="noopener" href="https://www.cnblogs.com/Miracevin/p/9697260.html">参考</a></p>
<p>主要使用费马小定理。<br />
费马小定理如下：若P为质数，则有如下表达式。 <span
class="math display">\[
a^{P - 1}=1(mod\ P)
\]</span></p>
<p>  但是，这个定理的否定是不成立的。即如下说法<strong>不成立</strong>，“若P为合数，则<span
class="math inline">\(a^{P - 1} \neq 1(mod\ P)\)</span>”,
也就是说，P为合数时也有一定概率导致<span class="math inline">\(a^{P -
1}=1(mod\ P)\)</span>。</p>
<p>一个命题的逆否命题与原命题同真假，所以当<span
class="math inline">\(a^{P - 1}\neq
1(mod(P))\)</span>时，P必然为合数。</p>
<p>由上述可知P满足<span class="math inline">\(a^{P - 1}=1(mod\
P)\)</span>，并不可以说明P为质数，但是如果对多个a成立，那么P为质数的可能行就大大增加，所以可以选取一些a来做质数筛选。</p>
<p>底数a的选择一般如下：<br />
当<span class="math inline">\(P \leq 2^{32}\)</span>时，<span
class="math inline">\(a\in{2,7,61}\)</span><br />
当<span class="math inline">\(P \leq 2^{64}\)</span>时，<span
class="math inline">\(a\in{2,325,9375,28178,450775,9780504,1795265022}\)</span><br />
当<span class="math inline">\(P \leq 2^{78}\)</span>时，<span
class="math inline">\(a\in{2,3,5,7,11,13,17,19,23,29,31,37}\)</span></p>
<p>一个加速的方法，已知<span class="math inline">\(a^{2} mod(p) =
1\)</span>则有 <span class="math display">\[
\begin{align*} (a^{2} - 1) mod(p) &amp;= 0 \\ (a + 1)(a - 1)mod(p)
&amp;= 1 \end{align*}
\]</span></p>
<p>如果p为质数，由于质数不能进行再次分解，于是会<span
class="math inline">\((a + 1)mod(p) = 0\)</span>或<span
class="math inline">\((a - 1)mod(p) =
0\)</span>成立，这就是二次探测定理：</p>
<p>  若p为质数，且<span
class="math inline">\(a^{2}mod(P)=1\)</span>，则<span
class="math inline">\(a\ mod(p) = \pm 1\)</span> 。</p>
<p>有了这个定理，在计算<span class="math inline">\(a^{p - 1}
mod(p)\)</span>时，设<span class="math inline">\(p - 1 =
2^{k}t\)</span>，<span class="math inline">\(v =
a^{t}\)</span>，由于p是偶数时不用判断，p为奇数时必然有<span
class="math inline">\(k \geq 1\)</span>，之后计算k次<span
class="math inline">\(v_{new} = v^{2} mod(p),v =
v_{new}\)</span>，当<span class="math inline">\(v_{new} ==
1\)</span>时必然有<span class="math inline">\(v = 1 || v = p -
1\)</span>，否则说明p不是质数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lll __int128</span></span><br><span class="line"><span class="function">ll <span class="title">mul</span><span class="params">(ll a,ll b,ll mod)</span></span>&#123;</span><br><span class="line">  ll ans = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span>(b)&#123;</span><br><span class="line">    <span class="keyword">if</span>(b &amp; <span class="number">1</span>)ans = ((lll)ans * (lll)a) % (lll)mod;</span><br><span class="line">    a = ((lll)a * (lll)a) % ((lll)mod);</span><br><span class="line">    b /= <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(x == <span class="number">1</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(x % <span class="number">2</span> == <span class="number">0</span>)<span class="keyword">return</span> x == <span class="number">2</span>;</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt;b&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">17</span>,<span class="number">23</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">37</span>,<span class="number">61</span>,<span class="number">24251</span>&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; b.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == b[i])<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ll k = x - <span class="number">1</span>;</span><br><span class="line">  ll t = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>((k &amp; <span class="number">1</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">    k /= <span class="number">2</span>;</span><br><span class="line">    t++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; b.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">    ll v = <span class="built_in">mul</span>(b[i],k,x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; t;i++)&#123;</span><br><span class="line">      ll next_v = ((lll)v * (lll)v) % (lll)x;       </span><br><span class="line">      <span class="keyword">if</span>(next_v == <span class="number">1</span>)&#123;      <span class="comment">//当前值为1，则检查上一次值是否为1或者x - 1，不成立说明x不是质数</span></span><br><span class="line">        <span class="keyword">if</span>(v != x - <span class="number">1</span> &amp;&amp; v != <span class="number">1</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        v = next_v;         <span class="comment">// 后面无需判断，后面都是1</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      v = next_v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(v != <span class="number">1</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="pollard-roh快速因式分解">pollard-roh快速因式分解</h1>
<p><a
target="_blank" rel="noopener" href="https://czicz.cn/2020/09/03/pollard-rho-suan-fa/">重要参考1</a><br />
<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/267884783">重要参考2</a><br />
<a
target="_blank" rel="noopener" href="https://www.studocu.com/row/document/changsha-university-of-science-and-technology/computer-algorithm/pollard-rho%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3-changsha-university-of-science-and-technology/26399430">参考</a><br />
<a
target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26131031/article/details/124135869">参考3</a></p>
<p>对这个算法参考了诸多资料后才明白处理过程以及原因，感谢以上作者。</p>
<ol type="1">
<li>朴素算法 以往进行因式分解的算法时间复杂度为<span
class="math inline">\(O(\sqrt{n})\)</span>，算法如下：</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> P;  <span class="comment">// 要分解的数</span></span><br><span class="line">cin&gt;&gt;P;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>;i*i &lt;= P ;i++)&#123;</span><br><span class="line">    <span class="keyword">while</span>(P % i == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">/*相关统计放在这里*/</span></span><br><span class="line">        P/=i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码中i就是P的质因数，分解的时间为<span
class="math inline">\(\sqrt(n)\)</span>。</p>
<ol start="2" type="1">
<li>概率优化 于是呢，有人想能不能将这个过程使用概率做 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> P;  <span class="comment">// 要分解的数</span></span><br><span class="line">    cin&gt;&gt;P;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_factor</span><span class="params">(<span class="type">int</span> P)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isprim</span>(P))&#123;</span><br><span class="line">        <span class="keyword">return</span> P;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">2</span> + (<span class="built_in">rand</span>() % (<span class="built_in">sqrt</span>(P) - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(P % ans == <span class="number">0</span>)<span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
假如因子为q，那么在<span
class="math inline">\([2,\sqrt{n}]\)</span>中寻找q的概率为<span
class="math inline">\(\frac{1}{\sqrt{n} - 1}\)</span>。期望在<span
class="math inline">\(\sqrt{n} -
1\)</span>次找到因子，和原先的算法时间复杂度差不多，而且概率方法时间复杂度难控制。<b><font color=red>注意</font></b>，这里质数判断算法采用Miller方法判断，可以在很短的时间内判断出质数。</li>
</ol>
<p>随机取出的数字可能和分解的目标存在公因子，为不让这次取值浪费，可以使用gcd来完成改进
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> P;  <span class="comment">// 要分解的数</span></span><br><span class="line">    cin&gt;&gt;P;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_factor</span><span class="params">(<span class="type">int</span> P)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isprim</span>(P))&#123;</span><br><span class="line">        <span class="keyword">return</span> P;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> temp = <span class="number">2</span> + (<span class="built_in">rand</span>() % (P - <span class="number">2</span>);</span><br><span class="line">        <span class="type">int</span> ans = <span class="built_in">gcd</span>(temp,P);</span><br><span class="line">        <span class="keyword">if</span>(ans != <span class="number">1</span>)<span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样的优化是的不光因子q可以让算法返回，2q,3q,4q,5q...都可以满足，使得中奖概率增大。但算法依旧有优化的空间。如果在枚举数字的时候，通过两次枚举，是否可以增加枚举出q的概率呢？</p>
<p>答案是对的，x1、x2为随机枚举的数字，|x2 -
x1|作为最终枚举的结果，那么枚举出q的概率为<span
class="math inline">\(\frac{2P}{P^{2}} =
\frac{2}{P}\)</span>，因为对于任意一数x1，|x2 - x1| ==
q的x2有两个。可见两次枚举就使得概率增大了。这个原理和生日悖论有关：</p>
<ol start="3" type="1">
<li>生日悖论</li>
</ol>
<p>生日悖论可以表述为：“一个房间里有23个人，则他们中有两人生日相同的概率超过一半”，证明通过不等式即可：<br />
k个人中所有人生日都不一样的概率为： <span class="math display">\[
p(k) = \frac{A_{k}^{365}}{365^{k}} = \frac{365}{365} \times \frac{365 -
1}{365} \times ... \times \frac{365 - k + 1}{365}
\]</span> 所以k个人中存在生日一样的人概率为1-p{k}</p>
<p>使用不等式<span class="math inline">\(1 + x &lt;
e^{x}\)</span>将p(k)上界得出 <span class="math display">\[
\begin{align*}
p(k) &amp;= \frac{365}{365} \times \frac{365 - 1}{365} \times ... \times
\frac{365 - k + 1}{365}\\
     &amp;= 1 \times (1 - \frac{1}{365}) \times (1 -
\frac{2}{365})\times ... \times (1 - \frac{k - 1}{365})
     &amp;\leq e^{\frac{0 - 1 - 2 - 3 .... - (k - 1)}{365}}
\end{align*}\]</span></p>
<p><span class="math display">\[
1 - p(k) \geq 1 - e^{\frac{-k(k-1)}{730}}
\]</span></p>
<p>当1-p(k)的下线超过50%时，k = 23。</p>
<p>生日悖论告诉我们，只要在某个范围内不断的生成随机数，很快就会得到两个模相等的数。</p>
<ol start="4" type="1">
<li>悖论优化</li>
</ol>
<p>  通过上面可以知道，如果随机取很多个<span class="math inline">\(x =
{x_{1},x_{2},...,x_{s}}\)</span>，那么对任意i、j、q，当s越大<span
class="math inline">\((x_{i} - x_{j})\ mod\ q =
0\)</span>越容易成立（p看做一年时间，x看做生日）。如果P因子为q，那么gcd(|x_{i}
-
x_{j}|,P)很容易得到因子q。已有论文已经证明为了能得到因子，枚举的数量要在<span
class="math inline">\(O(P^{\frac{1}{4}})\)</span>左右，才能得到因子。如果对这P^{1/4}个数两两作差然后计算gcd，时间复杂度变为<span
class="math inline">\(O((P^{\frac{1}{4}})^{2}
log_{2}P)\)</span>，其中<span
class="math inline">\(log_{2}\)</span>是由gcd计算产生的。这样的方法必然会退化，所以必须牺牲一些东西来换取另一些东西。</p>
<p>  显然数的两两组合会导致效率降低，所以索性就减少两两组合的次数，相应的会降低找到因子q的概率，pollard-roh找到了一种较优的策略，以下是我个人理解。</p>
<p>  pollard-roh使用伪随机数，利用<span class="math inline">\(f(x) =
(x^{2} + c) % P\)</span>生成所需随机数列，所生成数列有两个性质</p>
<ul>
<li>生成序列最终会发生循环</li>
<li><span class="math inline">\(f(x) - f(y)\ mod(x - y) = (x^{2} -
y^{2})\ mod(x - y) = (x + y)(x - y) \ mod(x - y) = 0\)</span></li>
</ul>
<p>  第一个特点决定了随机数生成一定时间之后会发生重复，所以需要再次进行生成。<br />
  第二个特点则表示数列<span class="math inline">\(x =
{x_{1},x_{2},...,x_{s}}\)</span>中下标差一样的两个数字含有相同因子，所以某一下标差相等的两元素做完gcd之后，其他元素可以不做（但这并不代表其他下标差一致的元素与P做gcd操作后依旧可能会产生不为1的结果,因为观察上面的式子中，f(x)
- f(y)中还有因子(x +
y)）。为了能让算法能取到不同下标差的元素，同时还能检测是否出现环，这时需要借用Flody判圈法。</p>
<p>  flody判圈中一个经典的思路就是两个指针，一个快速每次前进2单位，一个慢速每次前进1单位。放在这里刚好，快速的指针-慢速的指针下标差刚好可以遍历完所有下标差，同时通过快慢指针可以知道发生循环的时刻。代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(x,c,P)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x * x + c) % N;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> pollard-<span class="built_in">rho</span>(<span class="type">int</span> P)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is_prim</span>(P))<span class="keyword">return</span> P</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> c = <span class="built_in">rand</span>() % (n - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> t = <span class="built_in">f</span>(<span class="number">0</span>,c,P);</span><br><span class="line">        <span class="type">int</span> r = <span class="built_in">f</span>(t,c,P);</span><br><span class="line">        <span class="keyword">while</span>(t != r)&#123;</span><br><span class="line">            <span class="type">int</span> ans = <span class="built_in">gcd</span>(<span class="built_in">abs</span>(t - r),P);</span><br><span class="line">            <span class="keyword">if</span>(ans &gt; <span class="number">1</span>)<span class="keyword">return</span> ans;      </span><br><span class="line">            t = <span class="built_in">f</span>(t,c,P);</span><br><span class="line">            r = <span class="built_in">f</span>(<span class="built_in">f</span>(r,c,P),c,P);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 没有找到因子，重新选取P</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>gcd优化,使用倍增方案</li>
</ol>
<p>若<span class="math inline">\(gcd(x,P) \neq 1\)</span>，<span
class="math inline">\(gcd(y,P) \neq 1\)</span>，则<span
class="math inline">\(gcd(xy,P)\neq 1\)</span><br />
由于gcd的时间复杂度为log，为了能减少gcd的次数，基于上式子可以将多个<span
class="math inline">\(|x_{i} -
x_{j}|\)</span>连乘，与P做gcd，会找到因式，同时减少了gcd的次数</p>
<p>我们可每隔<code>1，2，4，8 ...</code>个数连乘一下，这样求解gcd的次数变为<span
class="math inline">\(log(P^{\frac{1}{4}})\)</span>次，所以总时间复杂度变为<span
class="math inline">\(O(P^{\frac{1}{4}} +
log(P^{\frac{1}{4}})log(P))\)</span>，连乘法注意取模，因为gcd(a % P, P)
= gcd(a,P);取模防止连乘的数过大。</p>
<p>上述方案依旧有一定缺陷，遇到后面计算一次gcd的时间越大，所以也可以将相隔距离从指数的距离改为固定距离C，时间复杂度变为<span
class="math inline">\(O(P^{\frac{1}{4}} +
\frac{P^{\frac{1}{4}}logP}{C})\)</span>，当<span class="math inline">\(C
&gt; log(P)\)</span>时，时间复杂度为<span
class="math inline">\(O(n^{\frac{1}{4}})\)</span></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">Pollard_Rho</span><span class="params">(ll N)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N == <span class="number">4</span>)     <span class="comment">// 注意特判一下</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_prime</span>(N))</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ll c = <span class="built_in">randint</span>(<span class="number">1</span>, N - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">auto</span> f = [=](ll x) &#123; <span class="built_in">return</span> ((lll)x * x + c) % N; &#125;;</span><br><span class="line">        ll t = <span class="number">0</span>, r = <span class="number">0</span>, p = <span class="number">1</span>, q;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">128</span>; ++i) <span class="comment">// 令固定距离C=128</span></span><br><span class="line">            &#123;</span><br><span class="line">                t = <span class="built_in">f</span>(t), r = <span class="built_in">f</span>(<span class="built_in">f</span>(r));</span><br><span class="line">                <span class="keyword">if</span> (t == r || (q = ((lll)p * <span class="built_in">abs</span>(t - r)) % N) == <span class="number">0</span>) <span class="comment">// 如果发现环，或者积即将为0，退出，注意这里使用等式gcd(a % b,b) = gcd(a,b)</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = q;</span><br><span class="line">            &#125;</span><br><span class="line">            ll d = <span class="built_in">gcd</span>(p, N);</span><br><span class="line">            <span class="keyword">if</span> (d &gt; <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> d;</span><br><span class="line">        &#125; <span class="keyword">while</span> (t != r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/22/%E7%BA%BF%E6%AE%B5%E6%A0%91%E4%B8%AD%E5%8D%95%E7%82%B9%E4%BF%AE%E6%94%B9%E5%8F%AF%E8%83%BD%E5%AD%98%E5%9C%A8%E4%BC%98%E5%8C%96%E7%9A%84%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/22/%E7%BA%BF%E6%AE%B5%E6%A0%91%E4%B8%AD%E5%8D%95%E7%82%B9%E4%BF%AE%E6%94%B9%E5%8F%AF%E8%83%BD%E5%AD%98%E5%9C%A8%E4%BC%98%E5%8C%96%E7%9A%84%E7%82%B9/" class="post-title-link" itemprop="url">线段树中单点修改可能存在优化的点</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-22 10:08:42" itemprop="dateCreated datePublished" datetime="2024-01-22T10:08:42+08:00">2024-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="题意">题意</h1>
<p><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/73810/J">传送门</a></p>
<p>给一个序列a，和两种操作，操作如下</p>
<p>操作1：对一段区域的数[l,r]使用<span class="math inline">\(F(x) =
2\left\lfloor\frac{|x^{3} - 3x|}{x^{2} +
1}\right\rfloor\)</span>逐个处理。<br />
操作2：计算[l,r]区域里面的和。</p>
<p>序列n个数，共q个操作。<span class="math inline">\(n \leq
10^{5}，q\leq 3\times 10^{5}，a_{i} &lt; 10^{9}\)</span></p>
<h1 id="题解">题解</h1>
<p>观察式子F，区间修改的lazy操作是无法使用的，因为F操作lazy无法叠加，无法使用lazy快速计算sum，单点操作无法避免。但是可以发现<span
class="math inline">\(F(x) \approx 2\frac{x -
1}{3}\)</span>，所以x在不断缩小最终变为0，也就是说，一些元素经过一定次数的操作会变为0之后会已知不发生改变，所以一种新的lazy标记出现了，可以将一段区间是否为0作为标记，如果为0，则此区间的操作都可以取消。以此来优化操作，由于每个点最多操作c次，之后的区间操作一次为logn，所以时间复杂度为O(cn
+ qlog(n))。</p>
<p>代码如下: <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*================================================================</span></span><br><span class="line"><span class="comment">*   Copyright (C) 2024 Wangxinpeng. All rights reserved.</span></span><br><span class="line"><span class="comment">*   </span></span><br><span class="line"><span class="comment">*   filename：    J.cpp</span></span><br><span class="line"><span class="comment">*   username:     skt1faker</span></span><br><span class="line"><span class="comment">*   create time:  10:08  2024.01.21</span></span><br><span class="line"><span class="comment">    email:        skk1faker@163.com</span></span><br><span class="line"><span class="comment">*   descripe:     </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">================================================================*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> L(value) (value &lt;&lt; 1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> R(value) ((L(value)) + 1)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod1 = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod2 = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxx = (<span class="type">int</span>)<span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">F</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * (<span class="built_in">abs</span>(x - <span class="number">1</span>) / <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span></span><br><span class="line">&#123;</span><br><span class="line">  ll sum;</span><br><span class="line">  <span class="type">bool</span> status;   <span class="comment">//true 表示全0</span></span><br><span class="line">&#125;tree[maxx &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> posi)</span></span>&#123;</span><br><span class="line">  tree[posi].sum = tree[<span class="built_in">L</span>(posi)].sum + tree[<span class="built_in">R</span>(posi)].sum;</span><br><span class="line">  tree[posi].status = tree[<span class="built_in">L</span>(posi)].status &amp;&amp; tree[<span class="built_in">R</span>(posi)].status;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> now_posi,<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;tree[now_posi].sum);</span><br><span class="line">    tree[now_posi].status = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(tree[now_posi].sum == <span class="number">0</span>)tree[now_posi].status = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">init</span>(<span class="built_in">L</span>(now_posi),l,mid);</span><br><span class="line">  <span class="built_in">init</span>(<span class="built_in">R</span>(now_posi),mid + <span class="number">1</span>,r);</span><br><span class="line">  <span class="built_in">up</span>(now_posi); <span class="comment">// 上推</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> now_posi,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> cl,<span class="type">int</span> cr)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(tree[now_posi].status)<span class="keyword">return</span> ;</span><br><span class="line">  <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">    tree[now_posi].sum = <span class="built_in">F</span>(tree[now_posi].sum);</span><br><span class="line">    <span class="keyword">if</span>(tree[now_posi].sum == <span class="number">0</span>)tree[now_posi].status = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="type">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span>(cl &lt;= mid)<span class="built_in">change</span>(<span class="built_in">L</span>(now_posi),l,mid,cl,cr);</span><br><span class="line">  <span class="keyword">if</span>(mid + <span class="number">1</span> &lt;= cr)<span class="built_in">change</span>(<span class="built_in">R</span>(now_posi),mid + <span class="number">1</span>,r,cl,cr);</span><br><span class="line">  <span class="built_in">up</span>(now_posi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> now_posi,<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> cl,<span class="type">int</span> cr)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(cl &lt;= l &amp;&amp; r &lt;= cr)&#123;</span><br><span class="line">    <span class="keyword">return</span> tree[now_posi].sum;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">  ll ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(cl &lt;= mid)ans += <span class="built_in">query</span>(<span class="built_in">L</span>(now_posi),l,mid,cl,cr);</span><br><span class="line">  <span class="keyword">if</span>(mid + <span class="number">1</span> &lt;= cr)ans += <span class="built_in">query</span>(<span class="built_in">R</span>(now_posi),mid + <span class="number">1</span>,r,cl,cr);</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> n,q;</span><br><span class="line">  cin&gt;&gt;n&gt;&gt;q;</span><br><span class="line">  <span class="built_in">init</span>(<span class="number">1</span>,<span class="number">0</span>,n - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; q;i++)&#123;</span><br><span class="line">    <span class="type">int</span> op,l,r;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;op,&amp;l,&amp;r);</span><br><span class="line">    l--,r--;</span><br><span class="line">    <span class="keyword">if</span>(op == <span class="number">1</span>)<span class="built_in">change</span>(<span class="number">1</span>,<span class="number">0</span>,n<span class="number">-1</span>,l,r);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      cout&lt;&lt;<span class="built_in">query</span>(<span class="number">1</span>,<span class="number">0</span>,n - <span class="number">1</span>,l,r)&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/21/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E4%B8%AD%E5%BD%93%E8%83%8C%E5%8C%85%E7%A9%BA%E9%97%B4%E5%80%BC%E8%BF%87%E5%A4%A7%EF%BC%8C%E8%80%8C%E4%BB%B7%E5%80%BC%E7%9A%84%E5%80%BC%E8%BE%83%E5%B0%8F%E5%BA%94%E5%A6%82%E6%9E%9C%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/21/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E4%B8%AD%E5%BD%93%E8%83%8C%E5%8C%85%E7%A9%BA%E9%97%B4%E5%80%BC%E8%BF%87%E5%A4%A7%EF%BC%8C%E8%80%8C%E4%BB%B7%E5%80%BC%E7%9A%84%E5%80%BC%E8%BE%83%E5%B0%8F%E5%BA%94%E5%A6%82%E6%9E%9C%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">背包问题中当背包空间值过大，而价值的值较小应如果处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-21 20:40:14" itemprop="dateCreated datePublished" datetime="2024-01-21T20:40:14+08:00">2024-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="题意">题意</h1>
<p>典型的背包问题，给出w,v数组，w表示重量，v表示价值，共n个物品，但是<span
class="math inline">\(\sum_{i = 1}^{n} w_{i} &lt; 1e9\)</span>，<span
class="math inline">\(\sum_{i = 1}^{n} v_{i} &lt; 1e6\)</span>。</p>
<p><a
target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/73810/I">题目传送门</a></p>
<h1 id="题解">题解</h1>
<p>可以发现传统背包中<code>dp[i][j]</code>表示前i个物品中，使用重量j的背包可以装载最大的价值数量，其空间复杂度和时间复杂度较大，需要转换思维。</p>
<p>可以将问题转换，使用<code>dp[i][j]</code>表示在前i个物品中，所得物品价值为j时使用最小的空间。</p>
<p>在查询W空间可以装载物品价值最大值时，需要遍历整个数组，<span
class="math inline">\(dp[n][j]\)</span>中j从最大值向0遍历，遇到第一个小于W对应的价值就是W对应最大价值。如果存在多次查询可以优化上述查询过程，由于遍历过程是在查找最后一个出现小于w的值，故可将ans[j]定义为<span
class="math inline">\(ans[j] = min_{i =
j}^{max\_val}(dp[n][i])\)</span>，则所得数组为一个递增数组，并且多段值分界点为w最小值最后一次出现的位置。之后通过二分查找就可完成查询。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*================================================================</span></span><br><span class="line"><span class="comment">*   Copyright (C) 2024 Wangxinpeng. All rights reserved.</span></span><br><span class="line"><span class="comment">*   </span></span><br><span class="line"><span class="comment">*   filename：    I.cpp</span></span><br><span class="line"><span class="comment">*   username:     skt1faker</span></span><br><span class="line"><span class="comment">*   create time:  16:20  2024.01.20</span></span><br><span class="line"><span class="comment">    email:        skk1faker@163.com</span></span><br><span class="line"><span class="comment">*   descripe:     </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">================================================================*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG0</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod1 = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod2 = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxx = <span class="number">100</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxW = <span class="number">10001</span>;</span><br><span class="line"><span class="type">const</span> ll MAXVAL = (ll)<span class="number">1e12</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">ll w[maxx],v[maxx];</span><br><span class="line">ll dp[maxx][maxW];</span><br><span class="line">ll ans[maxW];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  cin&gt;&gt;n;</span><br><span class="line">  <span class="type">int</span> sum_v = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++)&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;w[i],&amp;v[i]);</span><br><span class="line">    sum_v += v[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//memset(dp,0x3f3f3f3f,sizeof(dp));</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt;= n;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; maxW;j++)&#123;</span><br><span class="line">      dp[i][j] = MAXVAL;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt;= sum_v;j++)&#123;</span><br><span class="line">      <span class="keyword">if</span>(j &gt;= v[i])&#123;</span><br><span class="line">        dp[i][j] = <span class="built_in">min</span>(dp[i - <span class="number">1</span>][j - v[i]] + w[i], dp[i - <span class="number">1</span>][j]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> </span><br><span class="line">        dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ans[sum_v] = dp[n][sum_v]; </span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = sum_v - <span class="number">1</span>;i &gt;= <span class="number">0</span>;i--)&#123;</span><br><span class="line">    ans[i] = <span class="built_in">min</span>(ans[i + <span class="number">1</span>], dp[n][i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> Q;</span><br><span class="line">  cin&gt;&gt;Q;</span><br><span class="line">  <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">    ll W;</span><br><span class="line">    cin&gt;&gt;W;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>,r = sum_v;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">      <span class="type">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">if</span>(ans[mid] &lt;= W)&#123;</span><br><span class="line">        l = mid + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> </span><br><span class="line">        r = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ans[l] &gt; W)</span><br><span class="line">      l--;</span><br><span class="line">    cout&lt;&lt;l&lt;&lt;endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/21/cf1909E%E6%9A%B4%E5%8A%9B%E9%A2%98%E5%AD%98%E5%9C%A8%E7%9A%84%E7%89%B9%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/21/cf1909E%E6%9A%B4%E5%8A%9B%E9%A2%98%E5%AD%98%E5%9C%A8%E7%9A%84%E7%89%B9%E7%82%B9/" class="post-title-link" itemprop="url">cf1909E暴力题存在的特点</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-21 19:51:20" itemprop="dateCreated datePublished" datetime="2024-01-21T19:51:20+08:00">2024-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="题意">题意</h1>
<p>存在一组灯，编号为<code>1,2......n</code>，存在一组开关编号也为<code>1,2......n</code>，开关i能开启编号为i倍数的灯泡，问如何选择可以让灯泡打开数量不超过<span
class="math inline">\(\left \lfloor \frac{n}{5} \right
\rfloor\)</span>。需要注意的是，开关选择时会有如下要求：</p>
<ol type="1">
<li>选择至少一个开关</li>
<li>开关选择次数不能超过1</li>
<li>一些开关是有关联的，如果题目中给出关联(u,v),
那么在按下开关u时，必须按下开关v，但按下开关v不必按下开关u，比如当前有关系（1，2）（2，3），那么<code>1，2，3</code>是一个合法的选择，<code>2，3</code>也是一个合法的选择，<code>1</code>不是一个合法的选择，<code>1,2</code>也不是一个合法的选择。只要选择<code>1</code>，则必有开关<code>2,3</code>被按下。</li>
</ol>
<h1 id="题解">题解</h1>
<p>一个特殊的选择方案，<code>全部开关选择</code>将会导致编号为平方数的开关打开，所以所有开关选择后会有<span
class="math inline">\(\left\lfloor\sqrt{n}\right\rfloor\)</span>的灯泡打开，原因见下：<br />
所有开关都选择，那么x灯对应编号x的因子（因子就是所有可以整除这个数的数,不包括这个数自身.）和其本身都会导致灯的状态变化，变化次数和因子数有关，因子数量的计算可以通过数中质数因子情况确定。假设<span
class="math inline">\(x = \prod_{i =
1}^{k}z_{i}^{a_{i}}\)</span>，其中<span
class="math inline">\(z_{i}\)</span>为质数，那么因子数量为<span
class="math inline">\((\prod_{i = 1}^{k}(a_{i} + 1)) -
1\)</span>，加上x本身可知灯变化次数为<span class="math inline">\(y =
\prod_{i = 1}^{k}(a_{i} +
1)\)</span>，如果这个数为奇数，则x灯亮，为了能让y为奇数，则连乘中所有数不能为偶数，即<span
class="math inline">\(a_{i} + 1\)</span>为奇数，<span
class="math inline">\(a_{i}\)</span>为偶数，所以x中质因子幂次为偶数，导致x为完全平方数。</p>
<p>有了上面的证明，可知，当<span
class="math inline">\(\left\lfloor\sqrt{n}\right\rfloor \leq
\left\lfloor\frac{n}{5}\right\rfloor\)</span>时可以将所有开关选择，上述条件等价于<span
class="math inline">\(n \geq 20\)</span>。</p>
<p>当<span class="math inline">\(n\leq
19\)</span>时，由于确定一组灯打开数量不超过<span
class="math inline">\(\left\lfloor\frac{n}{5}\right\rfloor\)</span>没有什么特殊的构造方法（选择大于等于5的开关可能会因为关联其他开关而导致构造失效，所有已没有很好的办法），考虑到数据量较小，
使用暴力方法。</p>
<p>通过枚举开关的情况判断开关的选择是否符合要求。代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*================================================================</span></span><br><span class="line"><span class="comment">*   Copyright (C) 2024 Wangxinpeng. All rights reserved.</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   filename：    1909E.cpp</span></span><br><span class="line"><span class="comment">*   username:     skt1faker</span></span><br><span class="line"><span class="comment">*   create time:  17:18  2024.01.19</span></span><br><span class="line"><span class="comment">    email:        skk1faker@163.com</span></span><br><span class="line"><span class="comment">*   descripe:</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">================================================================*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG0</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod1 = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod2 = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxx = (<span class="type">int</span>)<span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> u[maxx], v[maxx];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; choise[maxx]; <span class="comment">// choise[元素数量][] = 符合条件的开关触发情况</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">5</span>; i &lt;= <span class="number">19</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> st = <span class="number">1</span>; st &lt; (<span class="number">1</span> &lt;&lt; (i)); st++) &#123;</span><br><span class="line">      <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">status</span><span class="params">(i, <span class="number">0</span>)</span></span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; i; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((st &gt;&gt; k) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="type">int</span> l = k; l &lt; i; l += (k + <span class="number">1</span>)) &#123;</span><br><span class="line">            status[l] ^= <span class="number">1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; i; k++) &#123;</span><br><span class="line">        sum += status[k];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (sum &gt; i / <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      choise[i].<span class="built_in">push_back</span>(st);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">5</span>) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n &gt; <span class="number">19</span>) &#123;</span><br><span class="line">    cout&lt;&lt;n&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">      cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; choise[n].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">      <span class="comment">//cout&lt;&lt;&quot;choise&quot;&lt;&lt;choise[n][i]&lt;&lt;endl;</span></span><br><span class="line">      <span class="type">bool</span> can = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m &amp;&amp; can; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((choise[n][i] &amp; (<span class="number">1</span> &lt;&lt; (u[j]))) != <span class="number">0</span> &amp;&amp; (choise[n][i] &amp; (<span class="number">1</span> &lt;&lt; (v[j]))) == <span class="number">0</span>)</span><br><span class="line">          can = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (can) &#123;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;choise[n][i]&lt;&lt;endl;</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">          <span class="keyword">if</span> ((choise[n][i] &amp; (<span class="number">1</span> &lt;&lt; j)) != <span class="number">0</span>) &#123;</span><br><span class="line">            num++;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;num&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">          <span class="keyword">if</span> ((choise[n][i] &amp; (<span class="number">1</span> &lt;&lt; j)) != <span class="number">0</span>) &#123;</span><br><span class="line">            cout &lt;&lt; j + <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;cout&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> T;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; T;</span><br><span class="line">  <span class="built_in">init</span>();</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u[i], &amp;v[i]);</span><br><span class="line">      u[i]--;</span><br><span class="line">      v[i]--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">solve</span>(n, m);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/15/tire%E6%A0%91-%E5%AD%97%E5%85%B8%E6%A0%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/15/tire%E6%A0%91-%E5%AD%97%E5%85%B8%E6%A0%91/" class="post-title-link" itemprop="url">tire树-字典树</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-15 16:18:28" itemprop="dateCreated datePublished" datetime="2024-01-15T16:18:28+08:00">2024-01-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://skk1faker.github.io/2024/01/15/%E7%89%9B%E5%AE%A2%E7%BB%83%E4%B9%A0%E8%B5%9B120-D%E9%A2%98-%E5%8C%BA%E9%97%B4%E5%BC%82%E6%88%96%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/acm-icpc.png">
      <meta itemprop="name" content="skk1faker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="skk1faker 笔记">
      <meta itemprop="description" content="登峰造极">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | skk1faker 笔记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/15/%E7%89%9B%E5%AE%A2%E7%BB%83%E4%B9%A0%E8%B5%9B120-D%E9%A2%98-%E5%8C%BA%E9%97%B4%E5%BC%82%E6%88%96%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">牛客练习赛120-D题-区间异或问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-15 10:56:12" itemprop="dateCreated datePublished" datetime="2024-01-15T10:56:12+08:00">2024-01-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-22 12:04:39" itemprop="dateModified" datetime="2025-02-22T12:04:39+08:00">2025-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="题意">题意</h1>
<p>存在序列<code>a[i]</code>,
至多k次改动，每次改动可以将第i个元素+1，即<code>a[i] = a[i] + 1</code>，问，怎样安排改动可以使得序列的区间和为奇数的区间数量最多。</p>
<h1 id="题解">题解</h1>
<p>在给出题解之前，需要有一些预备知识：</p>
<ol type="1">
<li>简单来说，计算奇偶与异或有关
计算区间和为奇数与异或有关，设<code>b[i] = a[i] % 2</code>，则区间<code>[l,r]</code>内<code>a[i]</code>和奇偶性与<code>b[i]</code>的异或和一样，所以将问题简化，直接计算<code>b</code>的异或前缀和<code>pre_xor</code>即可。</li>
<li>异或前缀和<span class="math inline">\(pre\_xor[i] = b[0] \oplus b[1]
\oplus \dots b[n]\)</span>，则区间[l,r]异或和为<span
class="math inline">\(pre\_xor[l - 1] \oplus pre\_xor[r]\)</span>。
所以一个区间的异或和为奇数，那么参与计算的两个<span
class="math inline">\(pre\_xor[i]\)</span>不相等即可。</li>
</ol>
<p>根据以上知识可以知,只要改动中令<span
class="math inline">\(pre\_xor\)</span>的01数量均衡，就可以让奇数和区间增多（原因很简单，假设总共n个数，异或前缀和中有m个1，n
+ 1 - m个0
(前缀和中存在一个pre_xor不包含任意一个元素)，则奇数和区间数量为(n - m +
1) *
m个，这是二次函数，求最值即可）,已知将i位置操作会发生<code>a[i] = a[i] + 1</code>，相应的b[i]相当于与1进行了异或，pre_xor会在[i,n
+
1]区间内所有值从0变为1。前面分析如果想让奇数和区间数量变为最大值，可以使pre_xor中01数量均匀。这种操作只需要一次就能完成，现给出证明。</p>
<p>先将问题抽象为“给出任意个01序列x，存在一种操作能将<code>[i,n]</code>01翻转，请找出这个位置，使得0的数量和1的数量差距最小”。</p>
<p>先计算所有x中所有1的数量，然后从最后一个位置逐个向0位置进行01翻转，计算此时数列中1的数量，在每次进行01翻转时，1的数量只能增加1或减少1，是<strong>连续</strong>的，假设未经翻转前1的数量为k个（0数量与1数量差距为n-2k），那么全部翻转完1的数量应为n
- k个（01数量差距为2k -
n)，由于之中要寻找01数量差距为1或为0的位置，因为|<span
class="math inline">\(n - 2k\| &gt;=
0\)</span>，n-2k与2k-n异号，01数量差距曲线必穿越x轴。每次翻转后01数量变化为+2
或-2，所以当n为偶数时必有一个时刻数量差为0，当n为奇数的时候必有一个时刻数量差为1或-1。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*================================================================</span></span><br><span class="line"><span class="comment">*   Copyright (C) 2024 Wangxinpeng. All rights reserved.</span></span><br><span class="line"><span class="comment">*   </span></span><br><span class="line"><span class="comment">*   filename：    D.cpp</span></span><br><span class="line"><span class="comment">*   username:     skt1faker</span></span><br><span class="line"><span class="comment">*   create time:  20:24  2024.01.14</span></span><br><span class="line"><span class="comment">    email:        skk1faker@163.com</span></span><br><span class="line"><span class="comment">*   descripe:     </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">================================================================*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG0</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod1 = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod2 = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxx = (<span class="type">int</span>)<span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> pre_xor[maxx];</span><br><span class="line"><span class="type">int</span> b[maxx];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> T;</span><br><span class="line">  cin&gt;&gt;T;</span><br><span class="line">  <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">    ll n,k;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    pre_xor[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++)&#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;b[i]);</span><br><span class="line">      b[i] %= <span class="number">2</span>;</span><br><span class="line">      pre_xor[i] = pre_xor[i - <span class="number">1</span>] ^ b[i];</span><br><span class="line">      sum += pre_xor[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k == <span class="number">0</span>)&#123;</span><br><span class="line">      cout &lt;&lt; sum * (n + <span class="number">1</span> - sum)&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      cout&lt;&lt;(n + <span class="number">1</span>) / <span class="number">2</span> * ((n + <span class="number">1</span>) - (n + <span class="number">1</span>) / <span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/default-index/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/default-index/">1</a><span class="space">&hellip;</span><a class="page-number" href="/default-index/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/default-index/page/7/">7</a><a class="page-number" href="/default-index/page/8/">8</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/default-index/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2023 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">skk1faker</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"skk1faker/blog_source","issue_term":"pathname","theme":"github-dark"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
